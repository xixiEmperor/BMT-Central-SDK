# å¤§å±å¯è§†åŒ–ç›‘æ§åº”ç”¨æ–¹æ¡ˆè®¾è®¡æ–‡æ¡£

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

åŸºäºç°æœ‰BMT-Central-SDKç”Ÿæ€ï¼Œè®¾è®¡å¹¶å®ç°ä¸€ä¸ªç‹¬ç«‹çš„Reactå¤§å±å¯è§†åŒ–ç›‘æ§åº”ç”¨ï¼Œä¸»è¦é¢å‘å¼€å‘è€…è°ƒè¯•å’Œå®æ—¶ç›‘æ§åœºæ™¯ã€‚è¯¥åº”ç”¨å°†å……åˆ†åˆ©ç”¨ç°æœ‰SDKçš„æ•°æ®é‡‡é›†èƒ½åŠ›ï¼Œæä¾›ä¸“ä¸šçº§çš„ç›‘æ§å¤§å±å±•ç¤ºã€‚

## ğŸ¯ é¡¹ç›®å®šä½

- **ç›®æ ‡ç”¨æˆ·**: å¼€å‘äººå‘˜
- **ä½¿ç”¨åœºæ™¯**: å®æ—¶ç›‘æ§å¤§å±ã€å¼€å‘è°ƒè¯•å·¥å…·
- **éƒ¨ç½²æ–¹å¼**: ç‹¬ç«‹åº”ç”¨
- **æ•°æ®æŒä¹…åŒ–**: Express + MongoDBåç«¯

## ğŸ—ï¸ æ•´ä½“æ¶æ„è®¾è®¡

```mermaid
graph TB
    subgraph "ä¸šåŠ¡å‰ç«¯åº”ç”¨ (åŸ‹ç‚¹æ•°æ®æº)"
        A1[ç”¨æˆ·çš„Reactåº”ç”¨A]
        A2[ç”¨æˆ·çš„Vueåº”ç”¨B]
        A3[ç”¨æˆ·çš„å…¶ä»–åº”ç”¨...]
        
        subgraph "SDKåŸ‹ç‚¹é‡‡é›†"
            S1[sdk-perf æ€§èƒ½ç›‘æ§]
            S2[sdk-telemetry é¥æµ‹ä¸ŠæŠ¥]
            S3[sdk-realtime å®æ—¶é€šä¿¡]
            S4[sdk-http ç½‘ç»œè¯·æ±‚]
            S5[sdk-core ä»»åŠ¡é˜Ÿåˆ—]
        end
        
        A1 --> S1
        A1 --> S2
        A2 --> S1
        A2 --> S2
        A3 --> S1
        A3 --> S2
    end
    
    subgraph "ç›‘æ§åç«¯æœåŠ¡å±‚"
        F[Express API Server]
        G[MongoDB æ•°æ®åº“]
        H[WebSocket æœåŠ¡]
        I[æ•°æ®èšåˆæœåŠ¡]
    end
    
    subgraph "ç›‘æ§å¤§å±åº”ç”¨å±‚ (å¯è§†åŒ–ç•Œé¢)"
        J[React å¤§å±ç›‘æ§åº”ç”¨]
        K[å®æ—¶æ•°æ®æµ]
        L[å›¾è¡¨å¯è§†åŒ–ç»„ä»¶]
        M[çŠ¶æ€ç®¡ç†]
    end
    
    S1 --> F
    S2 --> F
    S3 --> H
    S4 --> F
    S5 --> F
    
    F --> G
    F --> I
    H --> I
    I --> K
    K --> J
    L --> J
    M --> J
```

## ğŸ“Š æ•°æ®æµè®¾è®¡

### æ¶æ„è¯´æ˜

ä½ çš„ç†è§£å®Œå…¨æ­£ç¡®ï¼è®©æˆ‘æ˜ç¡®ä¸€ä¸‹ä¸‰å±‚æ¶æ„çš„èŒè´£ï¼š

#### ğŸ¯ **ä¸šåŠ¡å‰ç«¯åº”ç”¨ (åŸ‹ç‚¹æ•°æ®æº)**
- è¿™æ˜¯**ä½ çš„ç”¨æˆ·å®é™…ä½¿ç”¨çš„ä¸šåŠ¡åº”ç”¨**ï¼ˆå¦‚ç”µå•†ç½‘ç«™ã€ç®¡ç†åå°ç­‰ï¼‰
- åœ¨è¿™äº›åº”ç”¨ä¸­é›†æˆä½ çš„SDKè¿›è¡Œ**åŸ‹ç‚¹æ•°æ®é‡‡é›†**
- SDKåœ¨åå°é™é»˜æ”¶é›†æ€§èƒ½ã€ç”¨æˆ·è¡Œä¸ºã€é”™è¯¯ç­‰æ•°æ®
- æ•°æ®é€šè¿‡APIè‡ªåŠ¨ä¸ŠæŠ¥åˆ°ç›‘æ§åç«¯

#### ğŸ–¥ï¸ **ç›‘æ§å¤§å±åº”ç”¨ (å¯è§†åŒ–ç•Œé¢)**  
- è¿™æ˜¯**ç‹¬ç«‹çš„Reactç›‘æ§ä»ªè¡¨ç›˜åº”ç”¨**
- ä¸“é—¨ç”¨äº**å±•ç¤ºå’Œåˆ†æ**ä»ä¸šåŠ¡åº”ç”¨æ”¶é›†æ¥çš„æ•°æ®
- å¼€å‘è€…é€šè¿‡è¿™ä¸ªç•Œé¢æŸ¥çœ‹æ€§èƒ½è¶‹åŠ¿ã€é”™è¯¯ç»Ÿè®¡ç­‰
- ä¸ä¸šåŠ¡åº”ç”¨å®Œå…¨åˆ†ç¦»ï¼Œä¸ä¼šå½±å“ä¸šåŠ¡åº”ç”¨æ€§èƒ½

#### ğŸ”§ **ç›‘æ§åç«¯æœåŠ¡**
- æ¥æ”¶æ¥è‡ªä¸šåŠ¡åº”ç”¨çš„åŸ‹ç‚¹æ•°æ®
- å­˜å‚¨ã€èšåˆã€åˆ†ææ•°æ®
- ä¸ºç›‘æ§å¤§å±æä¾›APIå’Œå®æ—¶æ•°æ®æµ

### æ•°æ®é‡‡é›†ç»´åº¦

åŸºäºç°æœ‰SDKèƒ½åŠ›ï¼Œä»ä¸šåŠ¡å‰ç«¯åº”ç”¨ä¸­é‡‡é›†ä»¥ä¸‹ç»´åº¦çš„æ•°æ®ï¼š

#### 1. æ€§èƒ½æ•°æ® (`@wfynbzlx666/sdk-perf`)
```typescript
interface PerformanceMetrics {
  // Web Vitals æ ¸å¿ƒæŒ‡æ ‡
  lcp: number;           // Largest Contentful Paint
  fid: number;           // First Input Delay
  cls: number;           // Cumulative Layout Shift
  fcp: number;           // First Contentful Paint
  ttfb: number;          // Time to First Byte
  
  // ç³»ç»Ÿæ€§èƒ½æŒ‡æ ‡
  fps: number;           // å¸§ç‡
  memoryUsage: {         // å†…å­˜ä½¿ç”¨
    used: number;
    total: number;
    percentage: number;
  };
  
  // ç½‘ç»œè´¨é‡
  networkQuality: {
    rtt: number;         // å¾€è¿”æ—¶é—´
    downlink: number;    // ä¸‹è¡Œé€Ÿåº¦
    effectiveType: string; // è¿æ¥ç±»å‹
  };
  
  // å¯¼èˆªæ—¶é—´
  navigationTiming: {
    dns: number;
    tcp: number;
    request: number;
    response: number;
    dom: number;
  };
}
```

#### 2. ä¸šåŠ¡æ•°æ® (`@wfynbzlx666/sdk-telemetry`)
```typescript
interface BusinessMetrics {
  // ç”¨æˆ·è¡Œä¸ºäº‹ä»¶
  userActions: {
    type: string;        // äº‹ä»¶ç±»å‹
    target: string;      // ç›®æ ‡å…ƒç´ 
    timestamp: number;   // æ—¶é—´æˆ³
    duration?: number;   // æŒç»­æ—¶é—´
    metadata?: any;      // é¢å¤–æ•°æ®
  }[];
  
  // é¡µé¢è®¿é—®ç»Ÿè®¡
  pageViews: {
    url: string;
    referrer: string;
    timestamp: number;
    sessionId: string;
  }[];
  
  // é”™è¯¯ç»Ÿè®¡
  errors: {
    type: 'js' | 'resource' | 'network';
    message: string;
    stack?: string;
    url: string;
    timestamp: number;
  }[];
}
```

#### 3. å®æ—¶æ•°æ® (`@wfynbzlx666/sdk-realtime`)
```typescript
interface RealtimeMetrics {
  // è¿æ¥çŠ¶æ€
  connectionStatus: 'connected' | 'disconnected' | 'reconnecting';
  
  // æ¶ˆæ¯ç»Ÿè®¡
  messageStats: {
    sent: number;
    received: number;
    failed: number;
    latency: number;
  };
  
  // åœ¨çº¿ç”¨æˆ·æ•°
  activeUsers: number;
  
  // ç³»ç»ŸçŠ¶æ€
  systemHealth: {
    cpu: number;
    memory: number;
    disk: number;
  };
}
```

#### 4. ç½‘ç»œæ•°æ® (`@wfynbzlx666/sdk-http`)
```typescript
interface NetworkMetrics {
  // HTTP è¯·æ±‚ç»Ÿè®¡
  httpStats: {
    total: number;
    success: number;
    failed: number;
    avgResponseTime: number;
  };
  
  // API å¥åº·çŠ¶æ€
  apiHealth: {
    endpoint: string;
    status: 'healthy' | 'degraded' | 'unhealthy';
    responseTime: number;
    errorRate: number;
  }[];
  
  // é”™è¯¯åˆ†æ
  errorAnalysis: {
    statusCode: number;
    count: number;
    percentage: number;
  }[];
}
```

#### 5. ä»»åŠ¡æ•°æ® (`@wfynbzlx666/sdk-core`)
```typescript
interface TaskMetrics {
  // ä»»åŠ¡é˜Ÿåˆ—çŠ¶æ€
  queueStats: {
    pending: number;
    running: number;
    completed: number;
    failed: number;
  };
  
  // ä»»åŠ¡æ‰§è¡Œç»Ÿè®¡
  executionStats: {
    avgExecutionTime: number;
    successRate: number;
    retryRate: number;
    concurrency: number;
  };
}
```

## ğŸ¨ å‰ç«¯åº”ç”¨è®¾è®¡

### æŠ€æœ¯æ ˆé€‰æ‹©

```json
{
  "æ ¸å¿ƒæ¡†æ¶": "React 18 + TypeScript 5",
  "æ„å»ºå·¥å…·": "Vite 5",
  "çŠ¶æ€ç®¡ç†": "Zustand 4",
  "å›¾è¡¨åº“": "ECharts 5 + React-ECharts",
  "æ ·å¼æ–¹æ¡ˆ": "TailwindCSS 3 + CSS Modules",
  "å®æ—¶é€šä¿¡": "Socket.IO Client",
  "HTTPå®¢æˆ·ç«¯": "ç°æœ‰ @wfynbzlx666/sdk-http",
  "å·¥å…·åº“": "date-fns, lodash-es"
}
```

### åº”ç”¨ç»“æ„

```
dashboard-app/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/           # å¯è§†åŒ–ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ charts/          # å›¾è¡¨ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ LineChart.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ BarChart.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ PieChart.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ HeatMap.tsx
â”‚   â”‚   â”‚   â””â”€â”€ RealTimeChart.tsx
â”‚   â”‚   â”œâ”€â”€ cards/           # æŒ‡æ ‡å¡ç‰‡
â”‚   â”‚   â”‚   â”œâ”€â”€ MetricCard.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ StatusCard.tsx
â”‚   â”‚   â”‚   â””â”€â”€ TrendCard.tsx
â”‚   â”‚   â”œâ”€â”€ layout/          # å¸ƒå±€ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ Dashboard.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ Grid.tsx
â”‚   â”‚   â”‚   â””â”€â”€ Panel.tsx
â”‚   â”‚   â””â”€â”€ common/          # é€šç”¨ç»„ä»¶
â”‚   â”‚       â”œâ”€â”€ Loading.tsx
â”‚   â”‚       â”œâ”€â”€ ErrorBoundary.tsx
â”‚   â”‚       â””â”€â”€ Alert.tsx
â”‚   â”œâ”€â”€ hooks/               # è‡ªå®šä¹‰ Hooks
â”‚   â”‚   â”œâ”€â”€ useRealTimeData.ts
â”‚   â”‚   â”œâ”€â”€ useMetrics.ts
â”‚   â”‚   â”œâ”€â”€ useWebSocket.ts
â”‚   â”‚   â””â”€â”€ useChart.ts
â”‚   â”œâ”€â”€ services/            # æœåŠ¡å±‚
â”‚   â”‚   â”œâ”€â”€ api.ts          # API æ¥å£
â”‚   â”‚   â”œâ”€â”€ websocket.ts    # WebSocket ç®¡ç†
â”‚   â”‚   â””â”€â”€ dataProcessor.ts # æ•°æ®å¤„ç†
â”‚   â”œâ”€â”€ stores/              # çŠ¶æ€ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ metricsStore.ts
â”‚   â”‚   â”œâ”€â”€ configStore.ts
â”‚   â”‚   â””â”€â”€ uiStore.ts
â”‚   â”œâ”€â”€ types/               # ç±»å‹å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ metrics.ts
â”‚   â”‚   â”œâ”€â”€ api.ts
â”‚   â”‚   â””â”€â”€ chart.ts
â”‚   â”œâ”€â”€ utils/               # å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ formatters.ts
â”‚   â”‚   â”œâ”€â”€ calculations.ts
â”‚   â”‚   â””â”€â”€ constants.ts
â”‚   â”œâ”€â”€ styles/              # æ ·å¼æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ globals.css
â”‚   â”‚   â”œâ”€â”€ dashboard.css
â”‚   â”‚   â””â”€â”€ components.css
â”‚   â”œâ”€â”€ App.tsx
â”‚   â”œâ”€â”€ main.tsx
â”‚   â””â”€â”€ vite-env.d.ts
â”œâ”€â”€ public/
â”œâ”€â”€ package.json
â”œâ”€â”€ vite.config.ts
â”œâ”€â”€ tailwind.config.js
â”œâ”€â”€ tsconfig.json
â””â”€â”€ README.md
```

### æ ¸å¿ƒç»„ä»¶è®¾è®¡

#### 1. ä¸»ä»ªè¡¨ç›˜ç»„ä»¶
```typescript
interface DashboardProps {
  layout: 'fullscreen' | 'windowed';
  theme: 'light' | 'dark';
  refreshInterval: number;
  autoScale: boolean;
}

const Dashboard: React.FC<DashboardProps> = ({
  layout,
  theme,
  refreshInterval,
  autoScale
}) => {
  // å®æ—¶æ•°æ®è®¢é˜…
  const metrics = useRealTimeData(refreshInterval);
  
  return (
    <div className={`dashboard dashboard-${layout} theme-${theme}`}>
      {/* é¡¶éƒ¨çŠ¶æ€æ  */}
      <StatusBar />
      
      {/* ä¸»è¦æŒ‡æ ‡åŒºåŸŸ */}
      <div className="metrics-grid">
        <MetricCard title="Web Vitals" data={metrics.performance} />
        <MetricCard title="å®æ—¶ç”¨æˆ·" data={metrics.realtime} />
        <MetricCard title="é”™è¯¯ç‡" data={metrics.errors} />
        <MetricCard title="APIå¥åº·" data={metrics.api} />
      </div>
      
      {/* å›¾è¡¨åŒºåŸŸ */}
      <div className="charts-grid">
        <RealTimeChart 
          title="æ€§èƒ½è¶‹åŠ¿" 
          data={metrics.performance} 
          type="line" 
        />
        <RealTimeChart 
          title="ç”¨æˆ·æ´»åŠ¨" 
          data={metrics.userActivity} 
          type="bar" 
        />
        <RealTimeChart 
          title="ç³»ç»Ÿèµ„æº" 
          data={metrics.system} 
          type="gauge" 
        />
      </div>
      
      {/* è¯¦ç»†æ•°æ®åŒºåŸŸ */}
      <div className="details-grid">
        <DataTable title="æœ€è¿‘é”™è¯¯" data={metrics.recentErrors} />
        <DataTable title="æ…¢è¯·æ±‚" data={metrics.slowRequests} />
      </div>
    </div>
  );
};
```

#### 2. å®æ—¶å›¾è¡¨ç»„ä»¶
```typescript
interface RealTimeChartProps {
  title: string;
  data: any[];
  type: 'line' | 'bar' | 'pie' | 'gauge' | 'heatmap';
  height?: number;
  refreshInterval?: number;
}

const RealTimeChart: React.FC<RealTimeChartProps> = ({
  title,
  data,
  type,
  height = 300,
  refreshInterval = 1000
}) => {
  const chartRef = useRef<any>(null);
  
  // å›¾è¡¨é…ç½®
  const option = useMemo(() => {
    switch (type) {
      case 'line':
        return createLineChartOption(data);
      case 'bar':
        return createBarChartOption(data);
      case 'gauge':
        return createGaugeChartOption(data);
      default:
        return {};
    }
  }, [data, type]);
  
  // å®æ—¶æ›´æ–°
  useEffect(() => {
    const timer = setInterval(() => {
      if (chartRef.current) {
        chartRef.current.setOption(option, true);
      }
    }, refreshInterval);
    
    return () => clearInterval(timer);
  }, [option, refreshInterval]);
  
  return (
    <div className="chart-container">
      <h3 className="chart-title">{title}</h3>
      <ReactECharts
        ref={chartRef}
        option={option}
        style={{ height }}
        opts={{ renderer: 'canvas' }}
      />
    </div>
  );
};
```

## ğŸ”§ åç«¯æœåŠ¡è®¾è®¡

### æŠ€æœ¯æ ˆ

```json
{
  "è¿è¡Œæ—¶": "Node.js 18+",
  "æ¡†æ¶": "Express 4",
  "æ•°æ®åº“": "MongoDB 6",
  "å®æ—¶é€šä¿¡": "Socket.IO 4",
  "æ•°æ®å¤„ç†": "Node.js Streams",
  "ä»»åŠ¡é˜Ÿåˆ—": "ç°æœ‰ @wfynbzlx666/sdk-core"
}
```

### API è®¾è®¡

#### 1. æ•°æ®æ¥æ”¶æ¥å£
```typescript
// POST /api/metrics/performance
interface PerformanceDataRequest {
  sessionId: string;
  timestamp: number;
  metrics: PerformanceMetrics;
}

// POST /api/metrics/telemetry
interface TelemetryDataRequest {
  sessionId: string;
  events: TelemetryEvent[];
}

// WebSocket: /realtime
interface RealtimeMessage {
  type: 'metrics' | 'alert' | 'status';
  data: any;
  timestamp: number;
}
```

#### 2. æ•°æ®æŸ¥è¯¢æ¥å£
```typescript
// GET /api/dashboard/overview
interface DashboardOverview {
  summary: {
    totalUsers: number;
    errorRate: number;
    avgResponseTime: number;
    systemHealth: number;
  };
  trends: {
    performance: TimeSeriesData[];
    errors: TimeSeriesData[];
    users: TimeSeriesData[];
  };
}

// GET /api/metrics/history?type=performance&range=1h
interface MetricsHistoryResponse {
  data: TimeSeriesData[];
  aggregation: 'minute' | 'hour' | 'day';
  total: number;
}
```

### ä½¿ç”¨ç¤ºä¾‹

#### åœ¨ä¸šåŠ¡åº”ç”¨ä¸­é›†æˆSDK (åŸ‹ç‚¹é‡‡é›†)
```typescript
// ç”¨æˆ·çš„ä¸šåŠ¡åº”ç”¨ - main.ts
import { Perf } from '@wfynbzlx666/sdk-perf'
import { Telemetry } from '@wfynbzlx666/sdk-telemetry'
import { initHttp } from '@wfynbzlx666/sdk-http'

// åˆå§‹åŒ–SDKï¼Œé…ç½®æ•°æ®ä¸ŠæŠ¥åœ°å€
initHttp({ 
  baseURL: 'https://your-monitor-backend.com' 
})

// å¯åŠ¨æ€§èƒ½ç›‘æ§ (è‡ªåŠ¨é‡‡é›†)
Perf.init({
  sampleRate: 1.0,
  reportEndpoint: '/api/metrics/performance'
})

// å¯åŠ¨é¥æµ‹ä¸ŠæŠ¥ (è‡ªåŠ¨é‡‡é›†ç”¨æˆ·è¡Œä¸º)
Telemetry.init({
  autoTrack: true,
  reportEndpoint: '/api/metrics/telemetry'
})

// ä¸šåŠ¡ä»£ç æ­£å¸¸è¿è¡Œï¼ŒSDKåœ¨åå°è‡ªåŠ¨é‡‡é›†æ•°æ®
```

#### ç›‘æ§å¤§å±åº”ç”¨ (æ•°æ®å±•ç¤º)
```typescript
// ç›‘æ§å¤§å±åº”ç”¨ - Dashboard.tsx
import { useRealTimeMetrics } from './hooks/useRealTimeMetrics'

const MonitorDashboard = () => {
  // ä»ç›‘æ§åç«¯è·å–èšåˆæ•°æ®
  const metrics = useRealTimeMetrics({
    endpoint: 'https://your-monitor-backend.com/api/dashboard/realtime'
  })
  
  return (
    <div className="dashboard">
      <MetricCard title="å¹³å‡LCP" value={metrics.avgLCP} />
      <Chart data={metrics.performanceTrend} />
      <ErrorList errors={metrics.recentErrors} />
    </div>
  )
}
```

### æ•°æ®åº“è®¾è®¡

#### MongoDB é›†åˆç»“æ„

```typescript
// æ€§èƒ½æŒ‡æ ‡é›†åˆ
interface PerformanceDocument {
  _id: ObjectId;
  sessionId: string;
  timestamp: Date;
  metrics: {
    lcp: number;
    fid: number;
    cls: number;
    fps: number;
    memory: {
      used: number;
      total: number;
    };
  };
  userAgent: string;
  url: string;
  createdAt: Date;
}

// ç”¨æˆ·ä¼šè¯é›†åˆ
interface SessionDocument {
  _id: ObjectId;
  sessionId: string;
  userId?: string;
  startTime: Date;
  endTime?: Date;
  pageViews: number;
  errors: number;
  device: {
    type: 'desktop' | 'mobile' | 'tablet';
    browser: string;
    os: string;
  };
}

// é”™è¯¯æ—¥å¿—é›†åˆ
interface ErrorDocument {
  _id: ObjectId;
  sessionId: string;
  type: 'js' | 'resource' | 'network';
  message: string;
  stack?: string;
  url: string;
  timestamp: Date;
  resolved: boolean;
  count: number; // ç›¸åŒé”™è¯¯çš„èšåˆè®¡æ•°
}

// å®æ—¶çŠ¶æ€é›†åˆ
interface RealtimeStatusDocument {
  _id: ObjectId;
  type: 'system' | 'api' | 'user';
  status: any;
  timestamp: Date;
  ttl: Date; // TTLç´¢å¼•ï¼Œè‡ªåŠ¨è¿‡æœŸ
}
```

### æ•°æ®èšåˆæœåŠ¡

```typescript
class DataAggregationService {
  // å®æ—¶æ•°æ®èšåˆ
  async aggregateRealTimeMetrics(): Promise<AggregatedMetrics> {
    const pipeline = [
      {
        $match: {
          timestamp: { $gte: new Date(Date.now() - 60000) } // æœ€è¿‘1åˆ†é’Ÿ
        }
      },
      {
        $group: {
          _id: null,
          avgLCP: { $avg: "$metrics.lcp" },
          avgFID: { $avg: "$metrics.fid" },
          avgCLS: { $avg: "$metrics.cls" },
          avgFPS: { $avg: "$metrics.fps" },
          totalUsers: { $addToSet: "$sessionId" }
        }
      }
    ];
    
    const result = await PerformanceModel.aggregate(pipeline);
    return result[0];
  }
  
  // å†å²æ•°æ®èšåˆ
  async aggregateHistoricalData(
    timeRange: string,
    granularity: 'minute' | 'hour' | 'day'
  ): Promise<TimeSeriesData[]> {
    // å®ç°æ—¶é—´åºåˆ—æ•°æ®èšåˆé€»è¾‘
  }
  
  // å¼‚å¸¸æ£€æµ‹
  async detectAnomalies(): Promise<Alert[]> {
    // å®ç°å¼‚å¸¸æ£€æµ‹ç®—æ³•
  }
}
```

## ğŸš€ éƒ¨ç½²æ¶æ„

### å¼€å‘ç¯å¢ƒ
```yaml
version: '3.8'
services:
  dashboard-app:
    build: ./frontend
    ports:
      - "3000:3000"
    environment:
      - VITE_API_URL=http://localhost:3001
      - VITE_WS_URL=ws://localhost:3001
    
  api-server:
    build: ./backend
    ports:
      - "3001:3001"
    environment:
      - MONGODB_URI=mongodb://mongo:27017/dashboard
      - NODE_ENV=development
    depends_on:
      - mongo
      
  mongo:
    image: mongo:6
    ports:
      - "27017:27017"
    volumes:
      - mongo_data:/data/db

volumes:
  mongo_data:
```

### ç”Ÿäº§ç¯å¢ƒå»ºè®®
```yaml
# æ¨èéƒ¨ç½²æ–¹æ¡ˆ
å‰ç«¯åº”ç”¨: Vercel / Netlify (é™æ€æ‰˜ç®¡)
åç«¯API: Railway / Render (å®¹å™¨åŒ–éƒ¨ç½²)  
æ•°æ®åº“: MongoDB Atlas (æ‰˜ç®¡æ•°æ®åº“)
CDN: Cloudflare (å…¨çƒåŠ é€Ÿ)
ç›‘æ§: è‡ªå»ºç›‘æ§ + æ—¥å¿—èšåˆ
```

## ğŸ“ˆ åŠŸèƒ½ç‰¹æ€§

### æ ¸å¿ƒåŠŸèƒ½
- [x] **å®æ—¶æ€§èƒ½ç›‘æ§**: Web Vitalsã€FPSã€å†…å­˜ä½¿ç”¨
- [x] **ç”¨æˆ·è¡Œä¸ºåˆ†æ**: é¡µé¢è®¿é—®ã€ç”¨æˆ·æ“ä½œã€ä¼šè¯ç»Ÿè®¡
- [x] **é”™è¯¯è¿½è¸ª**: JSé”™è¯¯ã€ç½‘ç»œé”™è¯¯ã€èµ„æºåŠ è½½å¤±è´¥
- [x] **APIç›‘æ§**: è¯·æ±‚ç»Ÿè®¡ã€å“åº”æ—¶é—´ã€é”™è¯¯ç‡
- [x] **ç³»ç»Ÿå¥åº·**: CPUã€å†…å­˜ã€ç£ç›˜ä½¿ç”¨æƒ…å†µ
- [x] **å®æ—¶å‘Šè­¦**: é˜ˆå€¼ç›‘æ§ã€å¼‚å¸¸æ£€æµ‹ã€é‚®ä»¶é€šçŸ¥

### é«˜çº§åŠŸèƒ½
- [x] **å¤šç»´åº¦åˆ†æ**: æŒ‰æ—¶é—´ã€åœ°åŒºã€è®¾å¤‡ã€æµè§ˆå™¨åˆ†ç»„
- [x] **è¶‹åŠ¿é¢„æµ‹**: åŸºäºå†å²æ•°æ®çš„è¶‹åŠ¿åˆ†æ
- [x] **è‡ªå®šä¹‰ä»ªè¡¨ç›˜**: æ‹–æ‹½é…ç½®ã€ä¸ªæ€§åŒ–å¸ƒå±€
- [x] **æ•°æ®å¯¼å‡º**: CSVã€JSONã€PDFæŠ¥å‘Šç”Ÿæˆ
- [x] **å¤šç§Ÿæˆ·æ”¯æŒ**: é¡¹ç›®éš”ç¦»ã€æƒé™ç®¡ç†
- [x] **ç§»åŠ¨ç«¯é€‚é…**: å“åº”å¼è®¾è®¡ã€è§¦æ‘¸ä¼˜åŒ–

### æ€§èƒ½ä¼˜åŒ–
- [x] **æ•°æ®åˆ†é¡µ**: å¤§æ•°æ®é‡åˆ†æ‰¹åŠ è½½
- [x] **è™šæ‹Ÿæ»šåŠ¨**: é•¿åˆ—è¡¨æ€§èƒ½ä¼˜åŒ–
- [x] **å›¾è¡¨ç¼“å­˜**: é¿å…é‡å¤è®¡ç®—å’Œæ¸²æŸ“
- [x] **WebSocketå¤ç”¨**: å•è¿æ¥å¤šé¢‘é“
- [x] **æ•°æ®å‹ç¼©**: gzipå‹ç¼©ã€æ•°æ®å»é‡
- [x] **CDNåŠ é€Ÿ**: é™æ€èµ„æºå…¨çƒåˆ†å‘

## ğŸ¯ å¼€å‘è®¡åˆ’

### Phase 1: åŸºç¡€æ¶æ„ (2å‘¨)
- [ ] é¡¹ç›®åˆå§‹åŒ–å’Œç¯å¢ƒæ­å»º
- [ ] åç«¯APIæœåŠ¡å’Œæ•°æ®åº“è®¾è®¡
- [ ] å‰ç«¯åº”ç”¨æ¡†æ¶å’Œè·¯ç”±
- [ ] SDKæ•°æ®æ¥å…¥å’ŒåŸºç¡€API

### Phase 2: æ ¸å¿ƒåŠŸèƒ½ (3å‘¨)
- [ ] å®æ—¶æ•°æ®æµå’ŒWebSocketé›†æˆ
- [ ] åŸºç¡€å›¾è¡¨ç»„ä»¶å’ŒæŒ‡æ ‡å¡ç‰‡
- [ ] æ€§èƒ½ç›‘æ§é¢æ¿
- [ ] é”™è¯¯è¿½è¸ªå’Œå‘Šè­¦ç³»ç»Ÿ

### Phase 3: é«˜çº§åŠŸèƒ½ (2å‘¨)
- [ ] æ•°æ®èšåˆå’Œå†å²åˆ†æ
- [ ] è‡ªå®šä¹‰ä»ªè¡¨ç›˜é…ç½®
- [ ] å¤šç»´åº¦æ•°æ®åˆ†æ
- [ ] å¯¼å‡ºå’ŒæŠ¥å‘ŠåŠŸèƒ½

### Phase 4: ä¼˜åŒ–å®Œå–„ (1å‘¨)
- [ ] æ€§èƒ½ä¼˜åŒ–å’Œç¼“å­˜ç­–ç•¥
- [ ] å“åº”å¼è®¾è®¡å’Œç§»åŠ¨ç«¯é€‚é…
- [ ] æ–‡æ¡£ç¼–å†™å’Œéƒ¨ç½²æŒ‡å—
- [ ] æµ‹è¯•å’Œbugä¿®å¤

## ğŸ’¡ æŠ€æœ¯äº®ç‚¹

### 1. æ•°æ®æµä¼˜åŒ–
- **æµå¼å¤„ç†**: å¤§æ•°æ®é‡å®æ—¶å¤„ç†ï¼Œé¿å…å†…å­˜æº¢å‡º
- **æ™ºèƒ½èšåˆ**: æ ¹æ®æ—¶é—´çª—å£è‡ªåŠ¨é€‰æ‹©èšåˆç²’åº¦
- **ç¼“å­˜ç­–ç•¥**: å¤šå±‚ç¼“å­˜ï¼Œå‡å°‘æ•°æ®åº“å‹åŠ›

### 2. å¯è§†åŒ–åˆ›æ–°
- **è‡ªé€‚åº”å›¾è¡¨**: æ ¹æ®æ•°æ®ç‰¹å¾è‡ªåŠ¨é€‰æ‹©æœ€ä½³å›¾è¡¨ç±»å‹
- **3Då¯è§†åŒ–**: å¤æ‚æ•°æ®çš„ç«‹ä½“å±•ç¤º
- **åŠ¨ç”»è¿‡æ¸¡**: å¹³æ»‘çš„æ•°æ®å˜åŒ–åŠ¨ç”»

### 3. ç”¨æˆ·ä½“éªŒ
- **é›¶é…ç½®å¯åŠ¨**: å¼€ç®±å³ç”¨çš„é»˜è®¤é…ç½®
- **æ‹–æ‹½å¸ƒå±€**: å¯è§†åŒ–çš„ä»ªè¡¨ç›˜å®šåˆ¶
- **å¿«æ·é”®æ”¯æŒ**: æå‡æ“ä½œæ•ˆç‡

### 4. æ‰©å±•æ€§è®¾è®¡
- **æ’ä»¶ç³»ç»Ÿ**: æ”¯æŒè‡ªå®šä¹‰ç»„ä»¶å’Œæ•°æ®æº
- **ä¸»é¢˜ç³»ç»Ÿ**: å®Œå…¨å¯å®šåˆ¶çš„è§†è§‰é£æ ¼
- **APIå¼€æ”¾**: æ”¯æŒç¬¬ä¸‰æ–¹ç³»ç»Ÿé›†æˆ

## ğŸ”’ å®‰å…¨è€ƒè™‘

### æ•°æ®å®‰å…¨
- **æ•°æ®åŠ å¯†**: ä¼ è¾“å’Œå­˜å‚¨æ•°æ®åŠ å¯†
- **è®¿é—®æ§åˆ¶**: åŸºäºè§’è‰²çš„æƒé™ç®¡ç†
- **å®¡è®¡æ—¥å¿—**: å®Œæ•´çš„æ“ä½œè®°å½•

### ç³»ç»Ÿå®‰å…¨  
- **CORSé…ç½®**: è·¨åŸŸè¯·æ±‚å®‰å…¨æ§åˆ¶
- **Rate Limiting**: APIè¯·æ±‚é¢‘ç‡é™åˆ¶
- **è¾“å…¥éªŒè¯**: ä¸¥æ ¼çš„æ•°æ®æ ¡éªŒ

## ğŸ“Š æ€§èƒ½æŒ‡æ ‡

### å‰ç«¯æ€§èƒ½ç›®æ ‡
- **é¦–å±åŠ è½½**: < 2ç§’
- **äº¤äº’å“åº”**: < 100ms
- **å†…å­˜ä½¿ç”¨**: < 100MB
- **CPUä½¿ç”¨**: < 10%

### åç«¯æ€§èƒ½ç›®æ ‡
- **APIå“åº”**: < 200ms (P95)
- **å¹¶å‘å¤„ç†**: 1000+ è¿æ¥
- **æ•°æ®åå**: 10k+ äº‹ä»¶/ç§’
- **å¯ç”¨æ€§**: 99.9%

---

## ğŸ“ æ€»ç»“

è¿™ä¸ªå¤§å±å¯è§†åŒ–ç›‘æ§åº”ç”¨å°†å……åˆ†å‘æŒ¥ç°æœ‰BMT-Central-SDKçš„æ•°æ®é‡‡é›†èƒ½åŠ›ï¼Œé€šè¿‡ç°ä»£åŒ–çš„ReactæŠ€æœ¯æ ˆå’Œä¸“ä¸šçš„å¯è§†åŒ–ç»„ä»¶ï¼Œä¸ºå¼€å‘è€…æä¾›ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§ã€æ˜“äºä½¿ç”¨çš„ç›‘æ§å·¥å…·ã€‚

**æ ¸å¿ƒä¼˜åŠ¿ï¼š**
1. **æ·±åº¦é›†æˆ**: ä¸ç°æœ‰SDKæ— ç¼é›†æˆï¼Œæ•°æ®è·å–é›¶æˆæœ¬
2. **ä¸“ä¸šå¯è§†åŒ–**: åŸºäºEChartsçš„ä¸“ä¸šå›¾è¡¨åº“
3. **å®æ—¶æ€§èƒ½**: WebSocketå®æ—¶æ•°æ®æµï¼Œæ¯«ç§’çº§æ›´æ–°
4. **æ˜“äºéƒ¨ç½²**: ç‹¬ç«‹åº”ç”¨ï¼Œæ”¯æŒå¤šç§éƒ¨ç½²æ–¹å¼
5. **é«˜åº¦å¯å®šåˆ¶**: çµæ´»çš„é…ç½®å’Œæ‰©å±•èƒ½åŠ›

è¯¥æ–¹æ¡ˆæ—¢æ»¡è¶³äº†ä½ ä½œä¸ºå¼€å‘è°ƒè¯•å·¥å…·çš„æ ¸å¿ƒéœ€æ±‚ï¼Œåˆå…·å¤‡äº†å‘ä¼ä¸šçº§ç›‘æ§ç³»ç»Ÿæ¼”è¿›çš„æ½œåŠ›ã€‚
